{% extends 'core/base.html' %}
{% block title %}–£—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó{% endblock %}
{% block content %}
<h2>üìí –£—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó</h2>

<!-- –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endif %}

<!-- –ü–æ—à—É–∫–æ–≤–∏–π –±–∞—Ä -->
<form method="GET" action="{% url 'transaction_list' %}" class="search-bar mb-3">
    <label for="search-input" class="form-label">–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤:</label>
    <input type="text" id="search-input" name="search" class="form-control d-inline-block w-50" placeholder="–®—É–∫–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏..." value="{{ search_query }}">
    <button type="submit" class="btn btn-primary">–ü–æ—à—É–∫</button>
</form>

<!-- –¢–∞–±–ª–∏—Ü—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π -->
<table class="table table-striped">
    <thead>
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–¢–æ–≤–∞—Ä</th>
            <th>–¶—ñ–Ω–∞</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
            <th>–î—ñ—ó</th>
        </tr>
    </thead>
    <tbody>
        {% for t in transactions %}
        <tr>
            <td>{{ t.created_at|date:"d.m.Y H:i" }}</td>
            <td>{{ t.name }}</td>
            <td>{{ t.price }} –≥—Ä–Ω</td>
            <td>
                {% if t.category %}
                    {{ t.category.icon }} {{ t.category.name }}
                {% else %}
                    –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
                {% endif %}
            </td>
            <td>
                <a href="{% url 'edit_transaction' t.id %}" class="btn btn-sm btn-warning me-2">
                    ‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
                </a>
                <a href="{% url 'delete_transaction' t.id %}" class="btn btn-sm btn-danger">
                    üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—â–æ –Ω–µ–º–∞—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π -->
{% if not transactions %}
<p>–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
{% endif %}
{% endblock %}